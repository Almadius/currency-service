# Сервис Курсов Валют

## Описание
Этот проект представляет собой микросервис, разработанный на PHP с использованием фреймворка Laravel. Сервис предназначен для взаимодействия с API Центрального Банка России для получения актуальных курсов валют и их сохранения в локальной базе данных. Сервис включает в себя функциональность для регулярного обновления курсов валют.

## Технологии
- PHP 8.2
- Laravel 8
- MySQL
- Docker
- Feature тесты

## Установка и Запуск

### Требования
- Проект построен с использованием Docker, что обеспечивает легкость развертывания и настройки окружения. Docker и Docker Compose должны быть установлены на вашей машине.

### Запуск проекта
1. Клонируйте репозиторий на ваш локальный компьютер:
   git clone https://github.com/Almadius/currency-service.git

2. Перейдите в каталог проекта:
   cd <название_каталога_проекта>

3. Запустите контейнеры:
   docker-compose up -d

4. Установка зависимостей
   docker-compose exec app composer install

5. Миграция и начальное заполнение базы данных
   docker-compose exec app php artisan migrate

6. Запуск команды
   docker-compose exec app php artisan app:update-currency-rates

7. API предоставляет следующие эндпоинты:
   GET /api/currency-rates - получение списка всех доступных курсов валют.

### Использование Makefile
В проекте также имеется `Makefile` для удобства работы с Docker-командами. Ниже указаны основные команды:

- Запуск контейнеров:
  make up
- Остановка контейнеров:
  make down
- Просмотр логов:
  make logs
- Выполнение команд внутри контейнера приложения:
  make exec-app
- Выполнение команд внутри контейнера базы данных:
  make exec-db
- Запуск тестов должен происходить внутри контейнера laravel-app:
  php artisan test

## Конфигурация

### Docker-compose
Файл `docker-compose.yml` включает в себя настройки для трех сервисов:
- `laravelapp` - контейнер для приложения Laravel с PHP-FPM.
- `webserver` - веб-сервер Nginx.
- `db` - база данных MySQL.

### Dockerfile
`Dockerfile` описывает настройки для создания образа PHP-FPM, включая установку необходимых зависимостей и расширений PHP.

### Nginx Configuration
Файл `nginx.conf` содержит конфигурацию веб-сервера Nginx для обслуживания приложения Laravel.

### Init SQL
Файл `init.sql` используется для инициализации базы данных MySQL при первом запуске контейнера.

## Примечания
- Убедитесь, что порты, указанные в конфигурациях, не используются другими приложениями.
- Для внесения изменений в конфигурацию Docker, пересоздайте контейнеры с помощью `docker-compose up -d --build`.
